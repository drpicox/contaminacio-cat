(this["webpackJsonpcontaminacio-cat"]=this["webpackJsonpcontaminacio-cat"]||[]).push([[0],{25:function(e,a,t){e.exports={table:"TableMonthHour_table__1pQAj",row:"TableMonthHour_row__1V9aJ",header:"TableMonthHour_header__3KzZq",cell:"TableMonthHour_cell__2Rx8e"}},57:function(e,a,t){},66:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(12),l=t.n(c),o=(t(56),t(33)),i=(t(57),t(71)),u=t(72),s=t(73),h=t(74),b=t(75),d=t(1);function j(e){var a=e.to,t=e.children;return Object(d.jsx)(o.b,{className:"nav-link",to:a,children:t})}function f(e){var a=e.children;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(h.a,{bg:"primary",children:Object(d.jsx)(b.a,{children:Object(d.jsx)(j,{to:"/",children:"Contaminacio-Cat"})})}),a]})}var v=t(24),O=t(68),m=t(69),p=t(6),x=p.c;function g(e){return e.sources}var C=t(10),y=["h01","h02","h03","h04","h05","h06","h07","h08","h09","h10","h11","h12","h13","h14","h15","h16","h17","h18","h19","h20","h21","h22","h23","h24"];function S(e){return e.filters}var M=Object(C.a)((function(e){return e.history}),S,(function(e,a){var t=e,n=a.years,r=a.weekdays;return t=(t=t.filter((function(e){return n[e.year-2010]}))).filter((function(e){return r[e.dayOfTheWeek]}))})),P=Object(C.a)(M,(function(e){for(var a=[],t=0;t<24;t+=1){a[t]=[];for(var n=0;n<12;n+=1)a[t][n]={count:0,sum:0,values:[]}}return e.forEach((function(e){var t=e.month-1;y.forEach((function(n,r){var c,l;c=a[r][t],l=e[n],c.count+=1,c.sum+=l,c.values.push(l)}))})),a}));var k=t(15),T="rgba(0,0,0,0.9)",w={backgroundColor:"rgb(255,255,255)",color:T},A={"PM2.5":G(10),PM10:G(20),O3:G(100/3),NO2:G(40),SO2:G(10),OVER:G(10)};function V(e,a){return null==a?w:(a>e.length&&(a=e.length-1),a<0&&(a=0),e[a=Math.floor(a)])}function B(e,a,t){for(var n=[],r=0;r<t;r++){var c=r/t,l=1-c,o=Math.floor(e[0]*l+a[0]*c),i=Math.floor(e[1]*l+a[1]*c),u=Math.floor(e[2]*l+a[2]*c),s="rgb(".concat(o,",").concat(i,",").concat(u,")"),h=o+i+u<225?"rgba(255,255,255,0.9)":T;n.push({backgroundColor:s,color:h})}return n}function G(e){return[].concat(Object(k.a)(B([0,255,0],[225,225,0],e/2)),Object(k.a)(B([225,225,0],[255,0,0],e/2)),Object(k.a)(B([255,0,0],[225,0,225],e/2)),Object(k.a)(B([225,0,225],[64,0,64],e/2)),Object(k.a)(B([64,0,64],[16,0,8],150)))}var E=t(25),N=t.n(E),L=["gen","feb","ma\xe7","abr","mag","jun","jul","ago","set","oct","nov","dec"];function _(e){var a=e.table,t=e.scale;return Object(d.jsxs)("table",{className:N.a.table,children:[Object(d.jsx)(D,{}),y.map((function(e,n){return Object(d.jsx)(I,{hour:e,hourIndex:n,table:a,scale:t},e)}))]})}function D(){return Object(d.jsxs)(R,{className:N.a.header,children:[Object(d.jsx)(F,{}),L.map((function(e,a){return Object(d.jsx)(F,{children:e},a)}))]})}function I(e){var a=e.hour,t=e.hourIndex,n=e.table,r=e.scale;return Object(d.jsxs)(R,{children:[Object(d.jsx)(F,{children:a}),L.map((function(e,a){return Object(d.jsx)(F,{scale:r,value:n[t][a],children:n[t][a]},a)}))]})}function R(e){var a=e.className,t=e.children;return Object(d.jsx)("div",{className:"".concat(N.a.row," ").concat(a),children:t})}function F(e){var a=e.children,t=e.value,n=e.scale;return Object(d.jsx)("div",{className:N.a.cell,style:V(n,t),children:a})}var H=Object(C.a)(P,(function(e){return e.map((function(e){return e.map((function(e){var a=e.count,t=e.sum;return a?Math.floor(t/a):null}))}))}));function J(){var e=x(H),a=x(g).contaminant,t=A[a];return Object(d.jsx)(_,{table:e,scale:t})}var Y=Object(C.a)(P,(function(e){return e.map((function(e){return e.map((function(e){var a=e.count,t=e.values;return a?Math.max.apply(Math,Object(k.a)(t)):null}))}))}));function W(){var e=x(Y),a=x(g).contaminant,t=A[a];return Object(d.jsx)(_,{table:e,scale:t})}var $=Object(C.a)(P,(function(e,a){return a.max}),(function(e,a){return e.map((function(e){return e.map((function(e){var t=e.count,n=e.values;return t?n.filter((function(e){return e>=a})).length:null}))}))}));function K(e){var a=e.max,t=x((function(e){return $(e,{max:a})}));return Object(d.jsx)(_,{table:t,scale:A.OVER})}function Q(){var e=Object(n.useState)("Average"),a=Object(v.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)(50),l=Object(v.a)(c,2),o=l[0],i=l[1],u=x(g).estacio;return Object(d.jsxs)(d.Fragment,{children:[u," ",Object(d.jsx)("br",{}),Object(d.jsxs)(O.a,{className:"mb-2 mt-1",children:[Object(d.jsx)(m.a,{active:"Average"===t,onClick:function(){return r("Average")},children:"Mitjana"}),Object(d.jsx)(m.a,{active:"Max"===t,onClick:function(){return r("Max")},children:"M\xe0xim"}),Object(d.jsxs)(m.a,{active:"Over"===t,onClick:function(){return r("Over")},children:["#per sobre de"," ",Object(d.jsx)("input",{min:"0",max:"200",type:"number",value:o,onChange:function(e){return i(+e.target.value)}})]})]}),"Average"===t&&Object(d.jsx)(J,{}),"Max"===t&&Object(d.jsx)(W,{}),"Over"===t&&Object(d.jsx)(K,{max:o})]})}var Z="sources/ESTACIO_CHANGED",q="sources/CONTAMINANT_CHANGED";var z=["NO2","O3","PM2.5","PM10","SO2"];function U(){var e=x(g).contaminant;return Object(d.jsx)(O.a,{children:z.map((function(a){return Object(d.jsx)(X,{name:a,current:e},a)}))})}function X(e){var a=e.name,t=e.current,r=Object(p.b)(),c=Object(n.useCallback)((function(){return r({type:q,value:a})}),[r,a]);return Object(d.jsx)(m.a,{active:a===t,onClick:c,children:a})}var ee=t(70),ae=t(76),te=t(77),ne=t(9),re=t.n(ne),ce=t(17);var le=["Agullana","Alcanar","Alcover","Amposta","Badalona","Barber\xe0 del Vall\xe8s","Barcelona (Ciutadella)","Barcelona (Eixample)","Barcelona (Gr\xe0cia - Sant Gervasi)","Barcelona (Observatori Fabra)","Barcelona (Palau Reial)","Barcelona (Parc Vall Hebron)","Barcelona (Poblenou)","Barcelona (Sagrera)","Barcelona (Sants)","Barcelona (St. Gervasi)","Barcelona (Torre Girona)","Begur","Bellver de Cerdanya","Berga","Castellet i la Gornal","Cercs (Sant Corneli)","Cercs (Sant Jordi)","Cercs (St. Corneli)","Cercs (St. Jordi)","Constant\xed","Cornell\xe0 de Llobregat (Allende - Bonve\xed)","Cubelles","Cubelles (Poliesportiu)","el Prat de Llobregat (esgl\xe9sia)","El Prat de Llobregat (Jardins de la Pau)","El Prat de Llobregat (Sagnier)","el Prat de Llobregat (Sant Cosme)","Els Guiamets","F\xedgols (roca del Querol)","Flix","Fornells de la Selva (escola municipal)","Gandesa","Gav\xe0","Gav\xe0 (c/Girona - c/Progr\xe9s)","Gav\xe0 (pl. Balmes)","Girona (Escola de M\xfasica)","Girona (parc de la Devesa)","Granollers","Granollers (av. Joan Prim)","Granollers (c/ Joan Vinyoli)","Igualada","Juneda (ctra. de Lleida, km 75)","Juneda (Pla del Mol\xed)","L'Ametlla de Mar","la Nou de Bergued\xe0 (Malanyeu)","la Pobla de M./el Morell","la S\xe9nia","La S\xe9nia","L'Hospitalet de Llobregat","Lleida","Manlleu","Manresa","Martorell","Matar\xf3","Mollet del Vall\xe8s","Montcada i Reixac","Montcada i Reixac (Can Sant Joan)","Montorn\xe8s del Vall\xe8s (pl. del Poble)","Montsec","Montseny (La Castanya)","Pallej\xe0 (Roca de Vilana)","Pardines","Perafort (Puigdelf\xed)","Ponts","Reus","Ripollet","Rub\xed","Sabadell","Sabadell (pl. Creu de Barber\xe0)","Santa Coloma de Gramenet","Sant Adri\xe0 de Bes\xf2s","Santa Maria de Palautordera","Sant Andreu de la Barca","Santa Pau","Santa Perp\xe8tua de Mogoda","Sant Celoni","Sant Cugat del Vall\xe8s","Sant Feliu de Ll. (CEIP Marti i Pol)","Sant Fost de Campsentelles","Sant Just Desvern (CEIP Montseny)","Sant Vicen\xe7 dels Horts","Sant Vicen\xe7 dels Horts (Ribot)","Sarri\xe0 de Ter","Sitges (Vallcarca)","Sitges (Vallcarca - Oficines)","Sort","Sta. Coloma de Gr. (c/ Bruc)","Sta. Margarida i els Monjos (La R\xe0pita)","Sta. Perp\xe8tua de Mogoda","Tarragona (Bonavista)","Tarragona (Parc de la Ciutat)","Tarragona (pl. Generalitat)","Tarragona (Sant Salvador)","Tarragona (Universitat Laboral)","Terrassa","Tona","Tona (Zona Esportiva)","Vallcebre","Vallcebre (campanar)","Vandell\xf2s (Barranc del Terme)","Vandell\xf2s (Els Dedalts)","Vandell\xf2s (Viver)","Veciana (estaci\xf3 agroaliment\xe0ria)","Vic","Viladecans","Viladecans - Atrium","Vilafranca del Pened\xe8s","Vilanova i la Geltr\xfa","Vila-seca","Vila-seca (IES Vila-seca)"];function oe(){var e=Object(n.useState)(""),a=Object(v.a)(e,2),t=a[0],r=a[1],c=x(g).estacio;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(ee.a,{className:"mb-3",children:[Object(d.jsx)(ee.a.Prepend,{children:Object(d.jsx)(ee.a.Text,{children:"\ud83d\udd0e"})}),Object(d.jsx)(ae.a,{placeholder:"Nom d'estaci\xf3",value:t,onChange:function(e){return r(e.target.value)}})]}),Object(d.jsx)(te.a,{style:{maxHeight:"370px",overflow:"scroll"},children:le.filter((function(e){return!t||e.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(d.jsx)(ie,{name:e,current:c},e)}))})]})}function ie(e){var a=e.name,t=e.current,r=Object(p.b)(),c=Object(n.useCallback)((function(){return r({type:Z,value:a})}),[a]);return Object(d.jsx)(te.a.Item,{action:!0,active:a===t,onClick:c,children:a})}var ue="filters/WEEKDAY_TOGGLED",se="filters/YEAR_TOGGLED";var he=["","dll","dm","dx","dj","dv","ds","dg"];function be(){var e=x(S).weekdays;return Object(d.jsx)(O.a,{children:he.map((function(a,t){return a&&Object(d.jsx)(de,{name:a,value:t,active:e[t]},a)}))})}function de(e){var a=e.name,t=e.value,r=e.active,c=Object(p.b)(),l=Object(n.useCallback)((function(){return c(function(e){return{type:ue,value:e}}(t))}),[t,c]);return Object(d.jsx)(m.a,{active:r,onClick:l,children:a})}var je=new Array(12).fill(2010).map((function(e,a){return e+a}));function fe(){var e=x(S).years;return Object(d.jsx)(O.a,{children:je.map((function(a,t){return a&&Object(d.jsx)(ve,{name:a,value:t,active:e[t]},a)}))})}function ve(e){var a=e.name,t=e.value,r=e.active,c=Object(p.b)(),l=Object(n.useCallback)((function(){return c(function(e){return{type:se,value:e}}(t))}),[t,c]);return Object(d.jsx)(m.a,{active:r,onClick:l,children:a})}var Oe=function(){return Object(d.jsxs)(f,{children:[Object(d.jsx)("br",{}),Object(d.jsx)(i.a,{children:Object(d.jsxs)(u.a,{children:[Object(d.jsxs)(s.a,{sm:!0,md:!0,lg:!0,xl:!0,children:[Object(d.jsx)(Q,{}),Object(d.jsx)("br",{}),Object(d.jsx)(U,{}),Object(d.jsx)("br",{}),Object(d.jsx)(be,{}),Object(d.jsx)("br",{}),Object(d.jsx)(fe,{})]}),Object(d.jsx)(s.a,{sm:!0,md:!0,lg:!0,xl:!0,children:Object(d.jsx)(oe,{})})]})})]})},me=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,78)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,c=a.getLCP,l=a.getTTFB;t(e),n(e),r(e),c(e),l(e)}))},pe=t(16),xe=t(50),ge=t(11),Ce={weekdays:new Array(8).fill(!0),years:new Array(12).fill(!0)};var ye=t(51),Se=t(44),Me=t.n(Se);function Pe(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(ce.a)(re.a.mark((function e(a){var t,n,r,c,l=arguments;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:"NO2",n="estacio:".concat(a,"#contaminant:").concat(t),e.next=4,Me.a.getItem(n);case 4:if(r=e.sent){e.next=11;break}return e.next=8,Te(a,t);case 8:return r=e.sent,e.next=11,Me.a.setItem(n,r);case 11:return(c=Ve(r)).forEach((function(e){var a=new Date(e.data),t=a.getDay();e.date=a,e.year=a.getFullYear(),e.month=a.getMonth()+1,e.day=a.getDate(),e.dayOfTheWeek=t<1?7:t,e.weekend=0===t||6===t,e.h01=Ae(e.h01),e.h02=Ae(e.h02),e.h03=Ae(e.h03),e.h04=Ae(e.h04),e.h05=Ae(e.h05),e.h06=Ae(e.h06),e.h07=Ae(e.h07),e.h08=Ae(e.h08),e.h09=Ae(e.h09),e.h10=Ae(e.h10),e.h11=Ae(e.h11),e.h12=Ae(e.h12),e.h13=Ae(e.h13),e.h14=Ae(e.h14),e.h15=Ae(e.h15),e.h16=Ae(e.h16),e.h17=Ae(e.h17),e.h18=Ae(e.h18),e.h19=Ae(e.h19),e.h20=Ae(e.h20),e.h21=Ae(e.h21),e.h22=Ae(e.h22),e.h23=Ae(e.h23),e.h24=Ae(e.h24)})),e.abrupt("return",c.filter((function(e){return e.nom_estacio})));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e,a){return we.apply(this,arguments)}function we(){return(we=Object(ce.a)(re.a.mark((function e(a,t){var n,r,c;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="data between '2010-01-01T00:00:00' and '2021-02-28T00:00:00'AND nom_estacio='".concat(a,"'AND CONTAMINANT='").concat(t,"'").replace(/ /g,"%20").replace(/'/g,"%27"),r="https://analisi.transparenciacatalunya.cat/resource/tasf-thgu.csv?$limit=2853004&$offset=0&$where=".concat(n),e.next=4,fetch(r);case 4:return c=e.sent,e.abrupt("return",c.text());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){return""===e?null:+e}function Ve(e){var a=e.replace(/"+/g,"").split("\n").map((function(e){return e.split(",")})),t=Object(ye.a)(a),n=t[0];return t.slice(1).map((function(e){var a={};return n.forEach((function(t,n){a[t]=e[n]})),a}))}var Be="history/HISTORY_CHANGED",Ge="history/LOAD_HISTORY";function Ee(){return{type:Ge}}var Ne=[];var Le={contaminant:"NO2",estacio:"Barcelona (Poblenou)"};var _e=Object(pe.combineReducers)({filters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case ue:return Object(ge.a)(Object(ge.a)({},e),{},{weekdays:e.weekdays.map((function(e,t){return t===a.value?!e:e}))});case se:return Object(ge.a)(Object(ge.a)({},e),{},{years:e.years.map((function(e,t){return t===a.value?!e:e}))});default:return e}},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Be:return a.value;default:return e}},sources:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case q:return Object(ge.a)(Object(ge.a)({},e),{},{contaminant:a.value});case Z:return Object(ge.a)(Object(ge.a)({},e),{},{estacio:a.value});default:return e}}}),De=Object(pe.createStore)(_e,Object(xe.composeWithDevTools)(Object(pe.applyMiddleware)((function(e){return function(a){return function(){var t=Object(ce.a)(re.a.mark((function t(n){var r,c,l,o;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a(n),t.t0=n.type,t.next=t.t0===Z||t.t0===q?4:t.t0===Ge?6:12;break;case 4:return e.dispatch(Ee()),t.abrupt("break",12);case 6:return r=g(e.getState()),c=r.estacio,l=r.contaminant,t.next=9,Pe(c,l);case 9:return o=t.sent,e.dispatch({type:Be,value:o}),t.abrupt("break",12);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}))));De.dispatch(Ee()),l.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(o.a,{children:Object(d.jsx)(p.a,{store:De,children:Object(d.jsx)(Oe,{})})})}),document.getElementById("root")),me()}},[[66,1,2]]]);
//# sourceMappingURL=main.437f09ed.chunk.js.map