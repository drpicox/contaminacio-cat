{"version":3,"sources":["components/TableMonthHour.module.css","components/Layout.tsx","store/hooks.ts","types.ts","store/filters/selectors.ts","store/history/selectors.ts","store/table/selectors.ts","components/colorScale.ts","components/TableMonthHour.tsx","components/TableMonthHourAverage.tsx","components/TableMonthHourMax.tsx","components/TableMonthHourOver.tsx","components/TableMonthHourChooser.tsx","store/sources/selectors.ts","store/sources/types.ts","components/ContaminantChooser.tsx","store/sources/actions.ts","components/EstacioChooser.tsx","service/loadEstacions.ts","store/filters/types.ts","components/WeekdaysChooser.tsx","store/filters/actions.ts","components/YearsChooser.tsx","App.tsx","reportWebVitals.ts","store/filters/reducers.ts","service/loadHistory.ts","store/history/types.ts","store/history/actions.ts","store/history/middleware.ts","store/history/reducers.ts","store/sources/reducers.ts","store/index.ts","index.tsx"],"names":["module","exports","NavLink","to","children","className","Layout","Navbar","bg","Nav","useTypedSelector","useSelector","HOURS","getFilters","state","filters","getFilteredHistory","createSelector","history","result","years","weekdays","filter","r","year","dayOfTheWeek","getTable","hourIndex","monthIndex","count","sum","values","forEach","point","month","hour","previous","newValue","push","BLACK_COLOR","WHITE_STYLE","backgroundColor","color","NO2_SCALE","range","pickStyle","scale","value","length","Math","floor","from","steps","i","fb","fa","red","green","blue","MONTHS","TableMonthHour","table","styles","Header","map","RowHour","header","Cell","index","_","Row","row","cell","style","getAverageTable","entry","TableMonthHourAverage","getMaxTable","max","TableMonthHourMax","getOverTable","v","TableMonthHourOver","s","TableMonthHourChooser","useState","setTable","setMax","ButtonGroup","Button","active","onClick","min","type","onChange","ev","target","getSources","sources","ESTACIO_CHANGED","CONTAMINANT_CHANGED","contaminants","ContaminantChooser","contaminant","name","Contaminant","current","dispatch","useDispatch","useCallback","estacions","EstacioChooser","setFilter","estacio","InputGroup","Prepend","Text","FormControl","placeholder","ListGroup","maxHeight","overflow","toLowerCase","includes","Estacio","Item","action","WEEKDAY_TOGGLED","YEAR_TOGGLED","weekdaysNames","WeekdaysChooser","Weekday","weekdayToggled","yearsNumbers","Array","fill","y","YearsChooser","yearToggled","App","Container","Col","sm","md","lg","xl","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","loadHistory","a","key","localforage","getItem","csv","loadData","setItem","parseCsv","x","date","Date","data","day","getDay","getFullYear","getMonth","getDate","weekend","h01","toNumber","h02","h03","h04","h05","h06","h07","h08","h09","h10","h11","h12","h13","h14","h15","h16","h17","h18","h19","h20","h21","h22","h23","h24","nom_estacio","replace","url","fetch","request","text","split","line","HISTORY_CHANGED","LOAD_HISTORY","rootReducer","combineReducers","store","createStore","composeWithDevTools","applyMiddleware","next","createLoadHistoryAction","getState","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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,OACE,cAACf,EAAA,EAAD,UACGa,EAAarC,KAAI,SAACwC,GAAD,OAChB,cAACC,EAAD,CAAwBD,KAAMA,EAAME,QAASH,GAA3BC,QAM1B,SAASC,EAAT,GAA8C,IAAvBD,EAAsB,EAAtBA,KAAME,EAAgB,EAAhBA,QACrBC,EAAWC,cACXjB,EAAUkB,uBAAY,kBAAMF,ECjB3B,CACLd,KAAMO,EACNrD,MDe4DyD,MAAQ,CAACA,IAEvE,OACE,cAACf,EAAA,EAAD,CAAQC,OAAQc,IAASE,EAASf,QAASA,EAA3C,SACGa,I,0DE5BP,IAAMM,GCRmB,CACvB,WACA,UACA,UACA,UACA,WACA,2BACA,yBACA,uBACA,uCACA,gCACA,0BACA,+BACA,uBACA,sBACA,oBACA,0BACA,2BACA,QACA,sBACA,QACA,wBACA,uBACA,qBACA,sBACA,oBACA,eACA,iDACA,WACA,0BACA,qCACA,2CACA,iCACA,oCACA,eACA,8BACA,OACA,0CACA,UACA,UACA,oCACA,uBACA,+BACA,6BACA,aACA,6BACA,+BACA,WACA,kCACA,2BACA,mBACA,mCACA,2BACA,cACA,cACA,4BACA,SACA,UACA,UACA,YACA,YACA,uBACA,oBACA,oCACA,6CACA,UACA,yBACA,8BACA,WACA,0BACA,QACA,OACA,WACA,UACA,WACA,oCACA,2BACA,4BACA,8BACA,0BACA,YACA,8BACA,cACA,2BACA,uCACA,6BACA,oCACA,4BACA,oCACA,mBACA,qBACA,gCACA,OACA,+BACA,6CACA,6BACA,wBACA,gCACA,8BACA,4BACA,kCACA,WACA,OACA,wBACA,YACA,uBACA,mCACA,6BACA,uBACA,0CACA,MACA,aACA,sBACA,4BACA,0BACA,YACA,6BD1GK,SAASC,KAAkB,IAAD,EACH1B,mBAAS,IADN,mBACxB/D,EADwB,KAChB0F,EADgB,KAEvBC,EAAYvG,EAAiBuF,GAA7BgB,QAER,OACE,qCACE,eAACC,EAAA,EAAD,CAAY7G,UAAU,OAAtB,UACE,cAAC6G,EAAA,EAAWC,QAAZ,UACE,cAACD,EAAA,EAAWE,KAA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","file":"static/js/main.dde7f0ac.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"TableMonthHour_table__1pQAj\",\"row\":\"TableMonthHour_row__1V9aJ\",\"header\":\"TableMonthHour_header__3KzZq\",\"cell\":\"TableMonthHour_cell__2Rx8e\"};","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Navbar, Nav } from \"react-bootstrap\";\n\nfunction NavLink({ to, children }: { to: string; children: React.ReactNode }) {\n  return (\n    <Link className=\"nav-link\" to={to}>\n      {children}\n    </Link>\n  );\n}\n\nexport function Layout({ children }: { children: React.ReactNode }) {\n  return (\n    <>\n      <Navbar bg=\"primary\">\n        <Nav>\n          <NavLink to=\"/\">Contaminacio-Cat</NavLink>\n        </Nav>\n      </Navbar>\n      {children}\n    </>\n  );\n}\n","import { useSelector, TypedUseSelectorHook } from \"react-redux\";\nimport { RootState } from \"./index\";\n\nexport const useTypedSelector: TypedUseSelectorHook<RootState> = useSelector;\n","export const HOURS = [\n  \"h01\",\n  \"h02\",\n  \"h03\",\n  \"h04\",\n  \"h05\",\n  \"h06\",\n  \"h07\",\n  \"h08\",\n  \"h09\",\n  \"h10\",\n  \"h11\",\n  \"h12\",\n  \"h13\",\n  \"h14\",\n  \"h15\",\n  \"h16\",\n  \"h17\",\n  \"h18\",\n  \"h19\",\n  \"h20\",\n  \"h21\",\n  \"h22\",\n  \"h23\",\n  \"h24\",\n];\n\nexport interface StationPoint {\n  nom_estacio: string;\n  altitud: string;\n  latitud: string;\n  longitud: string;\n  magnitud: string;\n  contaminant: string;\n  unitats: string;\n  tipus_estacio: string;\n  area_urbana: string;\n  codi_ine: string;\n  municipi: string;\n  codi_comarca: string;\n  nom_comarca: string;\n  data: string;\n  date: Date;\n  year: number;\n  month: number;\n  day: number;\n  dayOfTheWeek: number;\n  weekend: boolean;\n  h01: number | null;\n  h02: number | null;\n  h03: number | null;\n  h04: number | null;\n  h05: number | null;\n  h06: number | null;\n  h07: number | null;\n  h08: number | null;\n  h09: number | null;\n  h10: number | null;\n  h11: number | null;\n  h12: number | null;\n  h13: number | null;\n  h14: number | null;\n  h15: number | null;\n  h16: number | null;\n  h17: number | null;\n  h18: number | null;\n  h19: number | null;\n  h20: number | null;\n  h21: number | null;\n  h22: number | null;\n  h23: number | null;\n  h24: number | null;\n}\n\nexport type StationHistory = StationPoint[];\n","import { createSelector } from \"reselect\";\nimport { RootState } from \"..\";\nimport { getHistory } from \"../history/selectors\";\nimport { FiltersState } from \"./types\";\n\nexport function getFilters(state: RootState): FiltersState {\n  return state.filters;\n}\n\nexport const getFilteredHistory = createSelector(\n  getHistory,\n  getFilters,\n  (history, filters) => {\n    let result = history;\n    const { years, weekdays } = filters;\n\n    result = result.filter((r) => years[r.year - 2010]);\n    result = result.filter((r) => weekdays[r.dayOfTheWeek]);\n\n    return result;\n  }\n);\n","import { RootState } from \"..\";\nimport { HistoryState } from \"./types\";\n\nexport function getHistory(state: RootState): HistoryState {\n  return state.history;\n}\n","import { createSelector } from \"reselect\";\nimport { ImportsNotUsedAsValues } from \"typescript\";\nimport { HOURS } from \"../../types\";\nimport { getFilteredHistory } from \"../filters/selectors\";\nimport { StatsTable, TableEntry } from \"./types\";\n\nexport const getTable = createSelector(getFilteredHistory, (history) => {\n  const result: StatsTable = [];\n  for (let hourIndex = 0; hourIndex < 24; hourIndex += 1) {\n    result[hourIndex] = [];\n    for (let monthIndex = 0; monthIndex < 12; monthIndex += 1)\n      result[hourIndex][monthIndex] = { count: 0, sum: 0, values: [] };\n  }\n\n  history.forEach((point: any) => {\n    const monthIndex = point.month - 1;\n    HOURS.forEach((hour, hourIndex) => {\n      accumulate(result[hourIndex][monthIndex], point[hour]);\n    });\n  });\n\n  return result;\n});\n\nfunction accumulate(previous: TableEntry, newValue: number) {\n  previous.count += 1;\n  previous.sum += newValue;\n  previous.values.push(newValue);\n}\n","export type StyleColor = { backgroundColor: string; color: string };\nexport type ColorScale = StyleColor[];\n\nexport const WHITE_COLOR = \"rgba(255,255,255,0.9)\";\nexport const BLACK_COLOR = \"rgba(0,0,0,0.9)\";\n\nexport const WHITE_STYLE: StyleColor = {\n  backgroundColor: \"rgb(255,255,255)\",\n  color: BLACK_COLOR,\n};\n\nexport const NO2_SCALE: ColorScale = [\n  ...range([0, 255, 0], [225, 225, 0], 20),\n  ...range([225, 225, 0], [255, 0, 0], 20),\n  ...range([255, 0, 0], [225, 0, 225], 20),\n  ...range([225, 0, 225], [64, 0, 64], 20),\n  ...range([64, 0, 64], [16, 0, 8], 150),\n];\n\nexport function pickStyle(scale: ColorScale, value: number | null) {\n  if (value == null) return WHITE_STYLE;\n  if (value > scale.length) value = scale.length - 1;\n  if (value < 0) value = 0;\n  value = Math.floor(value);\n  return scale[value];\n}\n\ntype Color = [number, number, number];\nfunction range(from: Color, to: Color, steps: number): StyleColor[] {\n  const result: StyleColor[] = [];\n  for (let i = 0; i < steps; i++) {\n    const fb = i / steps;\n    const fa = 1 - fb;\n    const red = Math.floor(from[0] * fa + to[0] * fb);\n    const green = Math.floor(from[1] * fa + to[1] * fb);\n    const blue = Math.floor(from[2] * fa + to[2] * fb);\n    const backgroundColor = `rgb(${red},${green},${blue})`;\n    const color = red + green + blue < 225 ? WHITE_COLOR : BLACK_COLOR;\n\n    result.push({ backgroundColor, color });\n  }\n  return result;\n}\n","import React from \"react\";\nimport { HOURS } from \"../types\";\nimport { pickStyle } from \"./colorScale\";\nimport styles from \"./TableMonthHour.module.css\";\n\nconst MONTHS = [\n  \"gen\",\n  \"feb\",\n  \"ma√ß\",\n  \"abr\",\n  \"mag\",\n  \"jun\",\n  \"jul\",\n  \"ago\",\n  \"set\",\n  \"oct\",\n  \"nov\",\n  \"dec\",\n];\n\nexport function TableMonthHour({ table, scale }: any) {\n  return (\n    <table className={styles.table}>\n      <Header />\n      {HOURS.map((hour, hourIndex) => (\n        <RowHour\n          key={hour}\n          hour={hour}\n          hourIndex={hourIndex}\n          table={table}\n          scale={scale}\n        />\n      ))}\n    </table>\n  );\n}\n\nfunction Header() {\n  return (\n    <Row className={styles.header}>\n      <Cell />\n      {MONTHS.map((month, index) => (\n        <Cell key={index}>{month}</Cell>\n      ))}\n    </Row>\n  );\n}\n\nfunction RowHour({ hour, hourIndex, table, scale }: any) {\n  return (\n    <Row>\n      <Cell>{hour}</Cell>\n      {MONTHS.map((_, monthIndex) => (\n        <Cell\n          key={monthIndex}\n          scale={scale}\n          value={table[hourIndex][monthIndex]}\n        >\n          {table[hourIndex][monthIndex]}\n        </Cell>\n      ))}\n    </Row>\n  );\n}\n\nfunction Row({ className, children }: any) {\n  return <div className={`${styles.row} ${className}`}>{children}</div>;\n}\n\nfunction Cell({ children, value, scale }: any) {\n  return (\n    <div className={styles.cell} style={pickStyle(scale, value)}>\n      {children}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { createSelector } from \"reselect\";\nimport { useTypedSelector } from \"../store/hooks\";\nimport { getTable } from \"../store/table/selectors\";\nimport { DerivedTable } from \"../store/table/types\";\nimport { NO2_SCALE } from \"./colorScale\";\nimport { TableMonthHour } from \"./TableMonthHour\";\n\nexport const getAverageTable = createSelector(\n  getTable,\n  (table): DerivedTable =>\n    table.map((row) =>\n      row.map((entry) => {\n        const { count, sum } = entry;\n        if (!count) return null;\n        return Math.floor(sum / count);\n      })\n    )\n);\n\nexport function TableMonthHourAverage() {\n  const table = useTypedSelector(getAverageTable);\n\n  return <TableMonthHour table={table} scale={NO2_SCALE} />;\n}\n","import React from \"react\";\nimport { createSelector } from \"reselect\";\nimport { useTypedSelector } from \"../store/hooks\";\nimport { getTable } from \"../store/table/selectors\";\nimport { DerivedTable } from \"../store/table/types\";\nimport { NO2_SCALE } from \"./colorScale\";\nimport { TableMonthHour } from \"./TableMonthHour\";\n\nexport const getMaxTable = createSelector(\n  getTable,\n  (table): DerivedTable =>\n    table.map((row) =>\n      row.map((entry) => {\n        const { count, values } = entry;\n\n        if (!count) return null;\n        return Math.max(...values);\n      })\n    )\n);\n\nexport function TableMonthHourMax() {\n  const table = useTypedSelector(getMaxTable);\n\n  return <TableMonthHour table={table} scale={NO2_SCALE} />;\n}\n","import React from \"react\";\nimport { createSelector } from \"reselect\";\nimport { useTypedSelector } from \"../store/hooks\";\nimport { getTable } from \"../store/table/selectors\";\nimport { DerivedTable } from \"../store/table/types\";\nimport { NO2_SCALE } from \"./colorScale\";\nimport { TableMonthHour } from \"./TableMonthHour\";\n\nexport const getOverTable = createSelector(\n  getTable,\n  (_: any, { max }: any) => max,\n  (table, max): DerivedTable =>\n    table.map((row) =>\n      row.map((entry) => {\n        const { count, values } = entry;\n\n        if (!count) return null;\n        return values.filter((v) => v >= max).length;\n      })\n    )\n);\n\nexport function TableMonthHourOver({ max }: any) {\n  const table = useTypedSelector((s) => getOverTable(s, { max }));\n\n  return <TableMonthHour table={table} scale={NO2_SCALE} />;\n}\n","import React, { useState } from \"react\";\nimport { Button, ButtonGroup } from \"react-bootstrap\";\nimport { TableMonthHourAverage } from \"./TableMonthHourAverage\";\nimport { TableMonthHourMax } from \"./TableMonthHourMax\";\nimport { TableMonthHourOver } from \"./TableMonthHourOver\";\n\nexport function TableMonthHourChooser() {\n  const [table, setTable] = useState(\"Average\");\n  const [max, setMax] = useState(50);\n\n  return (\n    <>\n      <ButtonGroup>\n        <Button\n          active={table === \"Average\"}\n          onClick={() => setTable(\"Average\")}\n        >\n          Average\n        </Button>\n        <Button active={table === \"Max\"} onClick={() => setTable(\"Max\")}>\n          Max\n        </Button>\n        <Button active={table === \"Over\"} onClick={() => setTable(\"Over\")}>\n          Over{\" \"}\n          <input\n            min=\"0\"\n            max=\"200\"\n            type=\"number\"\n            value={max}\n            onChange={(ev) => setMax(+ev.target.value)}\n          />\n        </Button>\n      </ButtonGroup>\n\n      {table === \"Average\" && <TableMonthHourAverage />}\n      {table === \"Max\" && <TableMonthHourMax />}\n      {table === \"Over\" && <TableMonthHourOver max={max} />}\n    </>\n  );\n}\n","import { RootState } from \"..\";\nimport { SourcesState } from \"./types\";\n\nexport function getSources(state: RootState): SourcesState {\n  return state.sources;\n}\n","export interface SourcesState {\n  estacio: string;\n  contaminant: string;\n}\n\nexport const ESTACIO_CHANGED = \"sources/ESTACIO_CHANGED\";\nexport interface EstacioChangedAction {\n  type: typeof ESTACIO_CHANGED;\n  value: string;\n}\n\nexport const CONTAMINANT_CHANGED = \"sources/CONTAMINANT_CHANGED\";\nexport interface ContaminantChangedAction {\n  type: typeof CONTAMINANT_CHANGED;\n  value: string;\n}\n\nexport type SourcesActionTypes =\n  | EstacioChangedAction\n  | ContaminantChangedAction;\n","import React, { useCallback } from \"react\";\nimport { ButtonGroup, Button } from \"react-bootstrap\";\nimport { useTypedSelector } from \"../store/hooks\";\nimport { getSources } from \"../store/sources/selectors\";\nimport { contaminantChanged } from \"../store/sources/actions\";\nimport { useDispatch } from \"react-redux\";\n\nconst contaminants = [\n  //\n  \"NO\",\n  \"NO2\",\n  \"NOX\",\n  \"O3\",\n  \"PM10\",\n  \"H2S\",\n  \"SO2\",\n];\n\nexport function ContaminantChooser() {\n  const { contaminant } = useTypedSelector(getSources);\n\n  return (\n    <ButtonGroup>\n      {contaminants.map((name) => (\n        <Contaminant key={name} name={name} current={contaminant} />\n      ))}\n    </ButtonGroup>\n  );\n}\n\nfunction Contaminant({ name, current }: any) {\n  const dispatch = useDispatch();\n  const onClick = useCallback(() => dispatch(contaminantChanged(name)), [name]);\n\n  return (\n    <Button active={name === current} onClick={onClick}>\n      {name}\n    </Button>\n  );\n}\n","import {\n  ContaminantChangedAction,\n  CONTAMINANT_CHANGED,\n  EstacioChangedAction,\n  ESTACIO_CHANGED,\n} from \"./types\";\n\nexport function estacioChanged(value: string): EstacioChangedAction {\n  return {\n    type: ESTACIO_CHANGED,\n    value,\n  };\n}\n\nexport function contaminantChanged(value: string): ContaminantChangedAction {\n  return {\n    type: CONTAMINANT_CHANGED,\n    value,\n  };\n}\n","import React, { useCallback, useState } from \"react\";\nimport { FormControl, InputGroup, ListGroup } from \"react-bootstrap\";\nimport { useTypedSelector } from \"../store/hooks\";\nimport { getSources } from \"../store/sources/selectors\";\nimport { estacioChanged } from \"../store/sources/actions\";\nimport { useDispatch } from \"react-redux\";\nimport { ESTACIONS } from \"../service/loadEstacions\";\n\nconst estacions = ESTACIONS;\n\nexport function EstacioChooser() {\n  const [filter, setFilter] = useState(\"\");\n  const { estacio } = useTypedSelector(getSources);\n\n  return (\n    <>\n      <InputGroup className=\"mb-3\">\n        <InputGroup.Prepend>\n          <InputGroup.Text>üîé</InputGroup.Text>\n        </InputGroup.Prepend>\n        <FormControl\n          placeholder=\"Nom d'estaci√≥\"\n          value={filter}\n          onChange={(ev) => setFilter(ev.target.value)}\n        />\n      </InputGroup>\n      <ListGroup style={{ maxHeight: \"370px\", overflow: \"scroll\" }}>\n        {estacions\n          .filter(\n            (name) =>\n              !filter || name.toLowerCase().includes(filter.toLowerCase())\n          )\n          .map((name) => (\n            <Estacio key={name} name={name} current={estacio} />\n          ))}\n      </ListGroup>\n    </>\n  );\n}\n\nfunction Estacio({ name, current }: any) {\n  const dispatch = useDispatch();\n  const onClick = useCallback(() => dispatch(estacioChanged(name)), [name]);\n\n  return (\n    <ListGroup.Item action active={name === current} onClick={onClick}>\n      {name}\n    </ListGroup.Item>\n  );\n}\n","export const ESTACIONS = [\n  \"Agullana\",\n  \"Alcanar\",\n  \"Alcover\",\n  \"Amposta\",\n  \"Badalona\",\n  \"Barber√† del Vall√®s\",\n  \"Barcelona (Ciutadella)\",\n  \"Barcelona (Eixample)\",\n  \"Barcelona (Gr√†cia - Sant Gervasi)\",\n  \"Barcelona (Observatori Fabra)\",\n  \"Barcelona (Palau Reial)\",\n  \"Barcelona (Parc Vall Hebron)\",\n  \"Barcelona (Poblenou)\",\n  \"Barcelona (Sagrera)\",\n  \"Barcelona (Sants)\",\n  \"Barcelona (St. Gervasi)\",\n  \"Barcelona (Torre Girona)\",\n  \"Begur\",\n  \"Bellver de Cerdanya\",\n  \"Berga\",\n  \"Castellet i la Gornal\",\n  \"Cercs (Sant Corneli)\",\n  \"Cercs (Sant Jordi)\",\n  \"Cercs (St. Corneli)\",\n  \"Cercs (St. Jordi)\",\n  \"Constant√≠\",\n  \"Cornell√† de Llobregat (Allende - Bonve√≠)\",\n  \"Cubelles\",\n  \"Cubelles (Poliesportiu)\",\n  \"el Prat de Llobregat (esgl√©sia)\",\n  \"El Prat de Llobregat (Jardins de la Pau)\",\n  \"El Prat de Llobregat (Sagnier)\",\n  \"el Prat de Llobregat (Sant Cosme)\",\n  \"Els Guiamets\",\n  \"F√≠gols (roca del Querol)\",\n  \"Flix\",\n  \"Fornells de la Selva (escola municipal)\",\n  \"Gandesa\",\n  \"Gav√†\",\n  \"Gav√† (c/Girona - c/Progr√©s)\",\n  \"Gav√† (pl. Balmes)\",\n  \"Girona (Escola de M√∫sica)\",\n  \"Girona (parc de la Devesa)\",\n  \"Granollers\",\n  \"Granollers (av. Joan Prim)\",\n  \"Granollers (c/ Joan Vinyoli)\",\n  \"Igualada\",\n  \"Juneda (ctra. de Lleida, km 75)\",\n  \"Juneda (Pla del Mol√≠)\",\n  \"L'Ametlla de Mar\",\n  \"la Nou de Bergued√† (Malanyeu)\",\n  \"la Pobla de M./el Morell\",\n  \"la S√©nia\",\n  \"La S√©nia\",\n  \"L'Hospitalet de Llobregat\",\n  \"Lleida\",\n  \"Manlleu\",\n  \"Manresa\",\n  \"Martorell\",\n  \"Matar√≥\",\n  \"Mollet del Vall√®s\",\n  \"Montcada i Reixac\",\n  \"Montcada i Reixac (Can Sant Joan)\",\n  \"Montorn√®s del Vall√®s (pl. del Poble)\",\n  \"Montsec\",\n  \"Montseny (La Castanya)\",\n  \"Pallej√† (Roca de Vilana)\",\n  \"Pardines\",\n  \"Perafort (Puigdelf√≠)\",\n  \"Ponts\",\n  \"Reus\",\n  \"Ripollet\",\n  \"Rub√≠\",\n  \"Sabadell\",\n  \"Sabadell (pl. Creu de Barber√†)\",\n  \"Santa Coloma de Gramenet\",\n  \"Sant Adri√† de Bes√≤s\",\n  \"Santa Maria de Palautordera\",\n  \"Sant Andreu de la Barca\",\n  \"Santa Pau\",\n  \"Santa Perp√®tua de Mogoda\",\n  \"Sant Celoni\",\n  \"Sant Cugat del Vall√®s\",\n  \"Sant Feliu de Ll. (CEIP Marti i Pol)\",\n  \"Sant Fost de Campsentelles\",\n  \"Sant Just Desvern (CEIP Montseny)\",\n  \"Sant Vicen√ß dels Horts\",\n  \"Sant Vicen√ß dels Horts (Ribot)\",\n  \"Sarri√† de Ter\",\n  \"Sitges (Vallcarca)\",\n  \"Sitges (Vallcarca - Oficines)\",\n  \"Sort\",\n  \"Sta. Coloma de Gr. (c/ Bruc)\",\n  \"Sta. Margarida i els Monjos (La R√†pita)\",\n  \"Sta. Perp√®tua de Mogoda\",\n  \"Tarragona (Bonavista)\",\n  \"Tarragona (Parc de la Ciutat)\",\n  \"Tarragona (pl. Generalitat)\",\n  \"Tarragona (Sant Salvador)\",\n  \"Tarragona (Universitat Laboral)\",\n  \"Terrassa\",\n  \"Tona\",\n  \"Tona (Zona Esportiva)\",\n  \"Vallcebre\",\n  \"Vallcebre (campanar)\",\n  \"Vandell√≤s (Barranc del Terme)\",\n  \"Vandell√≤s (Els Dedalts)\",\n  \"Vandell√≤s (Viver)\",\n  \"Veciana (estaci√≥ agroaliment√†ria)\",\n  \"Vic\",\n  \"Viladecans\",\n  \"Viladecans - Atrium\",\n  \"Vilafranca del Pened√®s\",\n  \"Vilanova i la Geltr√∫\",\n  \"Vila-seca\",\n  \"Vila-seca (IES Vila-seca)\",\n];\n\nexport async function loadEstacions() {\n  const request = await fetch(\n    \"http://mediambient.gencat.cat/.content/getData.jsp?cargaEstacions=true&uuid=47d68ac0-bf76-11ea-a226-005056924a59\",\n    {\n      headers: {\n        accept: \"text/html, */*; q=0.01\",\n        \"accept-language\": \"en-US,en;q=0.9,ca;q=0.8,en-GB;q=0.7,es;q=0.6\",\n        \"cache-control\": \"no-cache\",\n        pragma: \"no-cache\",\n        \"sec-gpc\": \"1\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n      },\n      referrer:\n        \"http://mediambient.gencat.cat/ca/05_ambits_dactuacio/atmosfera/qualitat_de_laire/vols-saber-que-respires/descarrega-de-dades/\",\n      referrerPolicy: \"strict-origin-when-cross-origin\",\n      body: null,\n      method: \"GET\",\n      mode: \"cors\",\n      credentials: \"include\",\n    }\n  );\n  return request.text();\n}\n","export interface FiltersState {\n  weekdays: boolean[];\n  years: boolean[];\n}\n\nexport const WEEKDAY_TOGGLED = \"filters/WEEKDAY_TOGGLED\";\nexport interface WeekdayToggledAction {\n  type: typeof WEEKDAY_TOGGLED;\n  value: number;\n}\n\nexport const YEAR_TOGGLED = \"filters/YEAR_TOGGLED\";\nexport interface YearToggledAction {\n  type: typeof YEAR_TOGGLED;\n  value: number;\n}\n\nexport type FilterActionTypes = WeekdayToggledAction | YearToggledAction;\n","import React, { useCallback } from \"react\";\nimport { ButtonGroup, Button } from \"react-bootstrap\";\nimport { useTypedSelector } from \"../store/hooks\";\nimport { getFilters } from \"../store/filters/selectors\";\nimport { weekdayToggled } from \"../store/filters/actions\";\nimport { useDispatch } from \"react-redux\";\n\nconst weekdaysNames = [\"\", \"dll\", \"dm\", \"dx\", \"dj\", \"dv\", \"ds\", \"dg\"];\n\nexport function WeekdaysChooser() {\n  const { weekdays } = useTypedSelector(getFilters);\n\n  return (\n    <ButtonGroup>\n      {weekdaysNames.map(\n        (name, index) =>\n          name && (\n            <Weekday\n              key={name}\n              name={name}\n              value={index}\n              active={weekdays[index]}\n            />\n          )\n      )}\n    </ButtonGroup>\n  );\n}\n\nfunction Weekday({ name, value, active }: any) {\n  const dispatch = useDispatch();\n  const onClick = useCallback(() => dispatch(weekdayToggled(value)), [\n    value,\n    dispatch,\n  ]);\n\n  return (\n    <Button active={active} onClick={onClick}>\n      {name}\n    </Button>\n  );\n}\n","import {\n  WeekdayToggledAction,\n  WEEKDAY_TOGGLED,\n  YearToggledAction,\n  YEAR_TOGGLED,\n} from \"./types\";\n\nexport function weekdayToggled(value: number): WeekdayToggledAction {\n  return {\n    type: WEEKDAY_TOGGLED,\n    value,\n  };\n}\n\nexport function yearToggled(value: number): YearToggledAction {\n  return {\n    type: YEAR_TOGGLED,\n    value,\n  };\n}\n","import React, { useCallback } from \"react\";\nimport { ButtonGroup, Button } from \"react-bootstrap\";\nimport { useTypedSelector } from \"../store/hooks\";\nimport { getFilters } from \"../store/filters/selectors\";\nimport { yearToggled } from \"../store/filters/actions\";\nimport { useDispatch } from \"react-redux\";\n\nconst yearsNumbers = new Array<number>(12).fill(2010).map((y, i) => y + i);\n\nexport function YearsChooser() {\n  const { years } = useTypedSelector(getFilters);\n\n  return (\n    <ButtonGroup>\n      {yearsNumbers.map(\n        (name, index) =>\n          name && (\n            <Weekday\n              key={name}\n              name={name}\n              value={index}\n              active={years[index]}\n            />\n          )\n      )}\n    </ButtonGroup>\n  );\n}\n\nfunction Weekday({ name, value, active }: any) {\n  const dispatch = useDispatch();\n  const onClick = useCallback(() => dispatch(yearToggled(value)), [\n    value,\n    dispatch,\n  ]);\n\n  return (\n    <Button active={active} onClick={onClick}>\n      {name}\n    </Button>\n  );\n}\n","import React from \"react\";\nimport { Col, Container, Row } from \"react-bootstrap\";\nimport { Layout } from \"./components/Layout\";\nimport { TableMonthHourChooser } from \"./components/TableMonthHourChooser\";\nimport { ContaminantChooser } from \"./components/ContaminantChooser\";\nimport { EstacioChooser } from \"./components/EstacioChooser\";\nimport { WeekdaysChooser } from \"./components/WeekdaysChooser\";\nimport { YearsChooser } from \"./components/YearsChooser\";\n\nfunction App() {\n  return (\n    <Layout>\n      <br />\n      <Container>\n        <Row>\n          <Col sm md lg xl>\n            <TableMonthHourChooser />\n            <br />\n            <ContaminantChooser />\n            <br />\n            <WeekdaysChooser />\n            <br />\n            <YearsChooser />\n          </Col>\n          <Col sm md lg xl>\n            <EstacioChooser />\n          </Col>\n        </Row>\n      </Container>\n    </Layout>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {\n  FilterActionTypes,\n  FiltersState,\n  WEEKDAY_TOGGLED,\n  YEAR_TOGGLED,\n} from \"./types\";\n\nconst initialState: FiltersState = {\n  weekdays: new Array<boolean>(8).fill(true),\n  years: new Array<boolean>(12).fill(true),\n};\n\nexport function filtersReducer(\n  state = initialState,\n  action: FilterActionTypes\n) {\n  switch (action.type) {\n    case WEEKDAY_TOGGLED:\n      return {\n        ...state,\n        weekdays: state.weekdays.map((active, index) =>\n          index === action.value ? !active : active\n        ),\n      };\n\n    case YEAR_TOGGLED:\n      return {\n        ...state,\n        years: state.years.map((active, index) =>\n          index === action.value ? !active : active\n        ),\n      };\n    default:\n      return state;\n  }\n}\n","import localforage from \"localforage\";\nimport { StationHistory } from \"../types\";\n\nexport async function loadHistory(\n  estacio: string,\n  contaminant: string = \"NO2\"\n): Promise<StationHistory> {\n  const key = `estacio:${estacio}#contaminant:${contaminant}`;\n  let csv = (await localforage.getItem(key)) as string;\n  if (!csv) {\n    csv = await loadData(estacio, contaminant);\n    await localforage.setItem(key, csv);\n  }\n\n  const result = parseCsv(csv) as StationHistory;\n  result.forEach((x) => {\n    const date = new Date(x.data);\n    const day = date.getDay();\n\n    x.date = date;\n    x.year = date.getFullYear();\n    x.month = date.getMonth() + 1;\n    x.day = date.getDate();\n    x.dayOfTheWeek = day < 1 ? 7 : day;\n    x.weekend = day === 0 || day === 6;\n\n    x.h01 = toNumber(x.h01);\n    x.h02 = toNumber(x.h02);\n    x.h03 = toNumber(x.h03);\n    x.h04 = toNumber(x.h04);\n    x.h05 = toNumber(x.h05);\n    x.h06 = toNumber(x.h06);\n    x.h07 = toNumber(x.h07);\n    x.h08 = toNumber(x.h08);\n    x.h09 = toNumber(x.h09);\n    x.h10 = toNumber(x.h10);\n    x.h11 = toNumber(x.h11);\n    x.h12 = toNumber(x.h12);\n    x.h13 = toNumber(x.h13);\n    x.h14 = toNumber(x.h14);\n    x.h15 = toNumber(x.h15);\n    x.h16 = toNumber(x.h16);\n    x.h17 = toNumber(x.h17);\n    x.h18 = toNumber(x.h18);\n    x.h19 = toNumber(x.h19);\n    x.h20 = toNumber(x.h20);\n    x.h21 = toNumber(x.h21);\n    x.h22 = toNumber(x.h22);\n    x.h23 = toNumber(x.h23);\n    x.h24 = toNumber(x.h24);\n  });\n\n  return result.filter((x) => x.nom_estacio);\n}\n\nasync function loadData(estacio: string, contaminant: string) {\n  // const data = escape(\n  //   `data between '2010-01-01T00:00:00' and '2021-02-28T00:00:00'AND nom_estacio='${estacio}'AND CONTAMINANT='${contaminant}'`\n  // )\n\n  const data = `data between '2010-01-01T00:00:00' and '2021-02-28T00:00:00'AND nom_estacio='${estacio}'AND CONTAMINANT='${contaminant}'`\n    .replace(/ /g, \"%20\")\n    .replace(/'/g, \"%27\");\n  const url = `https://analisi.transparenciacatalunya.cat/resource/tasf-thgu.csv?$limit=2853004&$offset=0&$where=${data}`;\n\n  const request = await fetch(url);\n  return request.text();\n}\n\nfunction toNumber(x: any) {\n  if (x === \"\") return null;\n  return +x;\n}\n\nfunction parseCsv(csv: string) {\n  const [header, ...lines] = csv\n    .replace(/\"+/g, \"\")\n    .split(\"\\n\")\n    .map((x: string) => x.split(\",\"));\n\n  return lines.map((line) => {\n    const result: any = {};\n    header.forEach((key, index) => {\n      result[key] = line[index];\n    });\n    return result;\n  });\n}\n","import { StationHistory } from \"../../types\";\n\nexport type HistoryState = StationHistory;\n\nexport const HISTORY_CHANGED = \"history/HISTORY_CHANGED\";\nexport interface HistoryChangedAction {\n  type: typeof HISTORY_CHANGED;\n  value: StationHistory;\n}\nexport const LOAD_HISTORY = \"history/LOAD_HISTORY\";\nexport interface LoadHistoryAction {\n  type: typeof LOAD_HISTORY;\n}\n\nexport type HistoryActionTypes = HistoryChangedAction | LoadHistoryAction;\n","import { StationHistory } from \"../../types\";\nimport {\n  HistoryChangedAction,\n  HISTORY_CHANGED,\n  LoadHistoryAction,\n  LOAD_HISTORY,\n} from \"./types\";\n\nexport function historyChanged(value: StationHistory): HistoryChangedAction {\n  return {\n    type: HISTORY_CHANGED,\n    value,\n  };\n}\n\nexport function loadHistory(): LoadHistoryAction {\n  return {\n    type: LOAD_HISTORY,\n  };\n}\n","import { Middleware } from \"redux\";\nimport { RootState } from \"..\";\nimport { loadHistory } from \"../../service/loadHistory\";\nimport { getSources } from \"../sources/selectors\";\nimport {\n  CONTAMINANT_CHANGED,\n  ESTACIO_CHANGED,\n  SourcesActionTypes,\n} from \"../sources/types\";\nimport {\n  historyChanged,\n  loadHistory as createLoadHistoryAction,\n} from \"./actions\";\nimport { HistoryActionTypes, LOAD_HISTORY } from \"./types\";\n\nexport const historyMiddleware: Middleware<{}, RootState> = (store) => (\n  next\n) => async (action: SourcesActionTypes | HistoryActionTypes) => {\n  next(action);\n\n  switch (action.type) {\n    case ESTACIO_CHANGED:\n    case CONTAMINANT_CHANGED: {\n      store.dispatch(createLoadHistoryAction());\n      break;\n    }\n    case LOAD_HISTORY: {\n      const { estacio, contaminant } = getSources(store.getState());\n      const history = await loadHistory(estacio, contaminant);\n      store.dispatch(historyChanged(history));\n      break;\n    }\n\n    default:\n    // nothing to do\n  }\n};\n","import { HISTORY_CHANGED, HistoryActionTypes, HistoryState } from \"./types\";\n\nconst initialState: HistoryState = [];\n\nexport function historyReducer(\n  state = initialState,\n  action: HistoryActionTypes\n) {\n  switch (action.type) {\n    case HISTORY_CHANGED:\n      return action.value;\n    default:\n      return state;\n  }\n}\n","import {\n  CONTAMINANT_CHANGED,\n  ESTACIO_CHANGED,\n  SourcesActionTypes,\n  SourcesState,\n} from \"./types\";\n\nconst initialState: SourcesState = {\n  contaminant: \"NO2\",\n  // contaminant: \"PM10\",\n  estacio: \"Barcelona (Poblenou)\",\n};\n\nexport function sourcesReducer(\n  state = initialState,\n  action: SourcesActionTypes\n) {\n  switch (action.type) {\n    case CONTAMINANT_CHANGED:\n      return { ...state, contaminant: action.value };\n    case ESTACIO_CHANGED:\n      return { ...state, estacio: action.value };\n    default:\n      return state;\n  }\n}\n","import { createStore, combineReducers, applyMiddleware } from \"redux\";\n\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport { filtersReducer } from \"./filters/reducers\";\nimport { historyMiddleware } from \"./history/middleware\";\nimport { historyReducer } from \"./history/reducers\";\nimport { sourcesReducer } from \"./sources/reducers\";\n\nexport const rootReducer = combineReducers({\n  filters: filtersReducer,\n  history: historyReducer,\n  sources: sourcesReducer,\n});\n\nexport const store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(historyMiddleware))\n);\n\nexport type RootState = ReturnType<typeof rootReducer>;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"bootswatch/dist/litera/bootstrap.css\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { store } from \"./store\";\nimport { Provider } from \"react-redux\";\nimport { loadHistory } from \"./store/history/actions\";\n\nstore.dispatch(loadHistory());\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}