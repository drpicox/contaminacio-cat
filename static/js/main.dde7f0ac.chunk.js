(this["webpackJsonpcontaminacio-cat"]=this["webpackJsonpcontaminacio-cat"]||[]).push([[0],{25:function(e,a,t){e.exports={table:"TableMonthHour_table__1pQAj",row:"TableMonthHour_row__1V9aJ",header:"TableMonthHour_header__3KzZq",cell:"TableMonthHour_cell__2Rx8e"}},57:function(e,a,t){},66:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(12),l=t.n(c),o=(t(56),t(33)),i=(t(57),t(71)),u=t(72),s=t(73),h=t(74),b=t(75),d=t(1);function j(e){var a=e.to,t=e.children;return Object(d.jsx)(o.b,{className:"nav-link",to:a,children:t})}function v(e){var a=e.children;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(h.a,{bg:"primary",children:Object(d.jsx)(b.a,{children:Object(d.jsx)(j,{to:"/",children:"Contaminacio-Cat"})})}),a]})}var f=t(24),O=t(68),m=t(69),p=t(10),x=t(6),g=x.c,C=["h01","h02","h03","h04","h05","h06","h07","h08","h09","h10","h11","h12","h13","h14","h15","h16","h17","h18","h19","h20","h21","h22","h23","h24"];function y(e){return e.filters}var S=Object(p.a)((function(e){return e.history}),y,(function(e,a){var t=e,n=a.years,r=a.weekdays;return t=(t=t.filter((function(e){return n[e.year-2010]}))).filter((function(e){return r[e.dayOfTheWeek]}))})),M=Object(p.a)(S,(function(e){for(var a=[],t=0;t<24;t+=1){a[t]=[];for(var n=0;n<12;n+=1)a[t][n]={count:0,sum:0,values:[]}}return e.forEach((function(e){var t=e.month-1;C.forEach((function(n,r){var c,l;c=a[r][t],l=e[n],c.count+=1,c.sum+=l,c.values.push(l)}))})),a}));var P=t(15),k="rgba(0,0,0,0.9)",T={backgroundColor:"rgb(255,255,255)",color:k},A=[].concat(Object(P.a)(B([0,255,0],[225,225,0],20)),Object(P.a)(B([225,225,0],[255,0,0],20)),Object(P.a)(B([255,0,0],[225,0,225],20)),Object(P.a)(B([225,0,225],[64,0,64],20)),Object(P.a)(B([64,0,64],[16,0,8],150)));function w(e,a){return null==a?T:(a>e.length&&(a=e.length-1),a<0&&(a=0),e[a=Math.floor(a)])}function B(e,a,t){for(var n=[],r=0;r<t;r++){var c=r/t,l=1-c,o=Math.floor(e[0]*l+a[0]*c),i=Math.floor(e[1]*l+a[1]*c),u=Math.floor(e[2]*l+a[2]*c),s="rgb(".concat(o,",").concat(i,",").concat(u,")"),h=o+i+u<225?"rgba(255,255,255,0.9)":k;n.push({backgroundColor:s,color:h})}return n}var G=t(25),V=t.n(G),N=["gen","feb","ma\xe7","abr","mag","jun","jul","ago","set","oct","nov","dec"];function E(e){var a=e.table,t=e.scale;return Object(d.jsxs)("table",{className:V.a.table,children:[Object(d.jsx)(L,{}),C.map((function(e,n){return Object(d.jsx)(_,{hour:e,hourIndex:n,table:a,scale:t},e)}))]})}function L(){return Object(d.jsxs)(D,{className:V.a.header,children:[Object(d.jsx)(I,{}),N.map((function(e,a){return Object(d.jsx)(I,{children:e},a)}))]})}function _(e){var a=e.hour,t=e.hourIndex,n=e.table,r=e.scale;return Object(d.jsxs)(D,{children:[Object(d.jsx)(I,{children:a}),N.map((function(e,a){return Object(d.jsx)(I,{scale:r,value:n[t][a],children:n[t][a]},a)}))]})}function D(e){var a=e.className,t=e.children;return Object(d.jsx)("div",{className:"".concat(V.a.row," ").concat(a),children:t})}function I(e){var a=e.children,t=e.value,n=e.scale;return Object(d.jsx)("div",{className:V.a.cell,style:w(n,t),children:a})}var H=Object(p.a)(M,(function(e){return e.map((function(e){return e.map((function(e){var a=e.count,t=e.sum;return a?Math.floor(t/a):null}))}))}));function F(){var e=g(H);return Object(d.jsx)(E,{table:e,scale:A})}var R=Object(p.a)(M,(function(e){return e.map((function(e){return e.map((function(e){var a=e.count,t=e.values;return a?Math.max.apply(Math,Object(P.a)(t)):null}))}))}));function J(){var e=g(R);return Object(d.jsx)(E,{table:e,scale:A})}var Y=Object(p.a)(M,(function(e,a){return a.max}),(function(e,a){return e.map((function(e){return e.map((function(e){var t=e.count,n=e.values;return t?n.filter((function(e){return e>=a})).length:null}))}))}));function W(e){var a=e.max,t=g((function(e){return Y(e,{max:a})}));return Object(d.jsx)(E,{table:t,scale:A})}function $(){var e=Object(n.useState)("Average"),a=Object(f.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)(50),l=Object(f.a)(c,2),o=l[0],i=l[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(O.a,{children:[Object(d.jsx)(m.a,{active:"Average"===t,onClick:function(){return r("Average")},children:"Average"}),Object(d.jsx)(m.a,{active:"Max"===t,onClick:function(){return r("Max")},children:"Max"}),Object(d.jsxs)(m.a,{active:"Over"===t,onClick:function(){return r("Over")},children:["Over"," ",Object(d.jsx)("input",{min:"0",max:"200",type:"number",value:o,onChange:function(e){return i(+e.target.value)}})]})]}),"Average"===t&&Object(d.jsx)(F,{}),"Max"===t&&Object(d.jsx)(J,{}),"Over"===t&&Object(d.jsx)(W,{max:o})]})}function K(e){return e.sources}var Q="sources/ESTACIO_CHANGED",Z="sources/CONTAMINANT_CHANGED";var q=["NO","NO2","NOX","O3","PM10","H2S","SO2"];function z(){var e=g(K).contaminant;return Object(d.jsx)(O.a,{children:q.map((function(a){return Object(d.jsx)(U,{name:a,current:e},a)}))})}function U(e){var a=e.name,t=e.current,r=Object(x.b)(),c=Object(n.useCallback)((function(){return r({type:Z,value:a})}),[a]);return Object(d.jsx)(m.a,{active:a===t,onClick:c,children:a})}var X=t(70),ee=t(76),ae=t(77),te=t(9),ne=t.n(te),re=t(17);var ce=["Agullana","Alcanar","Alcover","Amposta","Badalona","Barber\xe0 del Vall\xe8s","Barcelona (Ciutadella)","Barcelona (Eixample)","Barcelona (Gr\xe0cia - Sant Gervasi)","Barcelona (Observatori Fabra)","Barcelona (Palau Reial)","Barcelona (Parc Vall Hebron)","Barcelona (Poblenou)","Barcelona (Sagrera)","Barcelona (Sants)","Barcelona (St. Gervasi)","Barcelona (Torre Girona)","Begur","Bellver de Cerdanya","Berga","Castellet i la Gornal","Cercs (Sant Corneli)","Cercs (Sant Jordi)","Cercs (St. Corneli)","Cercs (St. Jordi)","Constant\xed","Cornell\xe0 de Llobregat (Allende - Bonve\xed)","Cubelles","Cubelles (Poliesportiu)","el Prat de Llobregat (esgl\xe9sia)","El Prat de Llobregat (Jardins de la Pau)","El Prat de Llobregat (Sagnier)","el Prat de Llobregat (Sant Cosme)","Els Guiamets","F\xedgols (roca del Querol)","Flix","Fornells de la Selva (escola municipal)","Gandesa","Gav\xe0","Gav\xe0 (c/Girona - c/Progr\xe9s)","Gav\xe0 (pl. Balmes)","Girona (Escola de M\xfasica)","Girona (parc de la Devesa)","Granollers","Granollers (av. Joan Prim)","Granollers (c/ Joan Vinyoli)","Igualada","Juneda (ctra. de Lleida, km 75)","Juneda (Pla del Mol\xed)","L'Ametlla de Mar","la Nou de Bergued\xe0 (Malanyeu)","la Pobla de M./el Morell","la S\xe9nia","La S\xe9nia","L'Hospitalet de Llobregat","Lleida","Manlleu","Manresa","Martorell","Matar\xf3","Mollet del Vall\xe8s","Montcada i Reixac","Montcada i Reixac (Can Sant Joan)","Montorn\xe8s del Vall\xe8s (pl. del Poble)","Montsec","Montseny (La Castanya)","Pallej\xe0 (Roca de Vilana)","Pardines","Perafort (Puigdelf\xed)","Ponts","Reus","Ripollet","Rub\xed","Sabadell","Sabadell (pl. Creu de Barber\xe0)","Santa Coloma de Gramenet","Sant Adri\xe0 de Bes\xf2s","Santa Maria de Palautordera","Sant Andreu de la Barca","Santa Pau","Santa Perp\xe8tua de Mogoda","Sant Celoni","Sant Cugat del Vall\xe8s","Sant Feliu de Ll. (CEIP Marti i Pol)","Sant Fost de Campsentelles","Sant Just Desvern (CEIP Montseny)","Sant Vicen\xe7 dels Horts","Sant Vicen\xe7 dels Horts (Ribot)","Sarri\xe0 de Ter","Sitges (Vallcarca)","Sitges (Vallcarca - Oficines)","Sort","Sta. Coloma de Gr. (c/ Bruc)","Sta. Margarida i els Monjos (La R\xe0pita)","Sta. Perp\xe8tua de Mogoda","Tarragona (Bonavista)","Tarragona (Parc de la Ciutat)","Tarragona (pl. Generalitat)","Tarragona (Sant Salvador)","Tarragona (Universitat Laboral)","Terrassa","Tona","Tona (Zona Esportiva)","Vallcebre","Vallcebre (campanar)","Vandell\xf2s (Barranc del Terme)","Vandell\xf2s (Els Dedalts)","Vandell\xf2s (Viver)","Veciana (estaci\xf3 agroaliment\xe0ria)","Vic","Viladecans","Viladecans - Atrium","Vilafranca del Pened\xe8s","Vilanova i la Geltr\xfa","Vila-seca","Vila-seca (IES Vila-seca)"];function le(){var e=Object(n.useState)(""),a=Object(f.a)(e,2),t=a[0],r=a[1],c=g(K).estacio;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(X.a,{className:"mb-3",children:[Object(d.jsx)(X.a.Prepend,{children:Object(d.jsx)(X.a.Text,{children:"\ud83d\udd0e"})}),Object(d.jsx)(ee.a,{placeholder:"Nom d'estaci\xf3",value:t,onChange:function(e){return r(e.target.value)}})]}),Object(d.jsx)(ae.a,{style:{maxHeight:"370px",overflow:"scroll"},children:ce.filter((function(e){return!t||e.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(d.jsx)(oe,{name:e,current:c},e)}))})]})}function oe(e){var a=e.name,t=e.current,r=Object(x.b)(),c=Object(n.useCallback)((function(){return r({type:Q,value:a})}),[a]);return Object(d.jsx)(ae.a.Item,{action:!0,active:a===t,onClick:c,children:a})}var ie="filters/WEEKDAY_TOGGLED",ue="filters/YEAR_TOGGLED";var se=["","dll","dm","dx","dj","dv","ds","dg"];function he(){var e=g(y).weekdays;return Object(d.jsx)(O.a,{children:se.map((function(a,t){return a&&Object(d.jsx)(be,{name:a,value:t,active:e[t]},a)}))})}function be(e){var a=e.name,t=e.value,r=e.active,c=Object(x.b)(),l=Object(n.useCallback)((function(){return c(function(e){return{type:ie,value:e}}(t))}),[t,c]);return Object(d.jsx)(m.a,{active:r,onClick:l,children:a})}var de=new Array(12).fill(2010).map((function(e,a){return e+a}));function je(){var e=g(y).years;return Object(d.jsx)(O.a,{children:de.map((function(a,t){return a&&Object(d.jsx)(ve,{name:a,value:t,active:e[t]},a)}))})}function ve(e){var a=e.name,t=e.value,r=e.active,c=Object(x.b)(),l=Object(n.useCallback)((function(){return c(function(e){return{type:ue,value:e}}(t))}),[t,c]);return Object(d.jsx)(m.a,{active:r,onClick:l,children:a})}var fe=function(){return Object(d.jsxs)(v,{children:[Object(d.jsx)("br",{}),Object(d.jsx)(i.a,{children:Object(d.jsxs)(u.a,{children:[Object(d.jsxs)(s.a,{sm:!0,md:!0,lg:!0,xl:!0,children:[Object(d.jsx)($,{}),Object(d.jsx)("br",{}),Object(d.jsx)(z,{}),Object(d.jsx)("br",{}),Object(d.jsx)(he,{}),Object(d.jsx)("br",{}),Object(d.jsx)(je,{})]}),Object(d.jsx)(s.a,{sm:!0,md:!0,lg:!0,xl:!0,children:Object(d.jsx)(le,{})})]})})]})},Oe=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,78)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,c=a.getLCP,l=a.getTTFB;t(e),n(e),r(e),c(e),l(e)}))},me=t(16),pe=t(50),xe=t(11),ge={weekdays:new Array(8).fill(!0),years:new Array(12).fill(!0)};var Ce=t(51),ye=t(44),Se=t.n(ye);function Me(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(re.a)(ne.a.mark((function e(a){var t,n,r,c,l=arguments;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:"NO2",n="estacio:".concat(a,"#contaminant:").concat(t),e.next=4,Se.a.getItem(n);case 4:if(r=e.sent){e.next=11;break}return e.next=8,ke(a,t);case 8:return r=e.sent,e.next=11,Se.a.setItem(n,r);case 11:return(c=we(r)).forEach((function(e){var a=new Date(e.data),t=a.getDay();e.date=a,e.year=a.getFullYear(),e.month=a.getMonth()+1,e.day=a.getDate(),e.dayOfTheWeek=t<1?7:t,e.weekend=0===t||6===t,e.h01=Ae(e.h01),e.h02=Ae(e.h02),e.h03=Ae(e.h03),e.h04=Ae(e.h04),e.h05=Ae(e.h05),e.h06=Ae(e.h06),e.h07=Ae(e.h07),e.h08=Ae(e.h08),e.h09=Ae(e.h09),e.h10=Ae(e.h10),e.h11=Ae(e.h11),e.h12=Ae(e.h12),e.h13=Ae(e.h13),e.h14=Ae(e.h14),e.h15=Ae(e.h15),e.h16=Ae(e.h16),e.h17=Ae(e.h17),e.h18=Ae(e.h18),e.h19=Ae(e.h19),e.h20=Ae(e.h20),e.h21=Ae(e.h21),e.h22=Ae(e.h22),e.h23=Ae(e.h23),e.h24=Ae(e.h24)})),e.abrupt("return",c.filter((function(e){return e.nom_estacio})));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,a){return Te.apply(this,arguments)}function Te(){return(Te=Object(re.a)(ne.a.mark((function e(a,t){var n,r,c;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="data between '2010-01-01T00:00:00' and '2021-02-28T00:00:00'AND nom_estacio='".concat(a,"'AND CONTAMINANT='").concat(t,"'").replace(/ /g,"%20").replace(/'/g,"%27"),r="https://analisi.transparenciacatalunya.cat/resource/tasf-thgu.csv?$limit=2853004&$offset=0&$where=".concat(n),e.next=4,fetch(r);case 4:return c=e.sent,e.abrupt("return",c.text());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){return""===e?null:+e}function we(e){var a=e.replace(/"+/g,"").split("\n").map((function(e){return e.split(",")})),t=Object(Ce.a)(a),n=t[0];return t.slice(1).map((function(e){var a={};return n.forEach((function(t,n){a[t]=e[n]})),a}))}var Be="history/HISTORY_CHANGED",Ge="history/LOAD_HISTORY";function Ve(){return{type:Ge}}var Ne=[];var Ee={contaminant:"NO2",estacio:"Barcelona (Poblenou)"};var Le=Object(me.combineReducers)({filters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case ie:return Object(xe.a)(Object(xe.a)({},e),{},{weekdays:e.weekdays.map((function(e,t){return t===a.value?!e:e}))});case ue:return Object(xe.a)(Object(xe.a)({},e),{},{years:e.years.map((function(e,t){return t===a.value?!e:e}))});default:return e}},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Be:return a.value;default:return e}},sources:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Z:return Object(xe.a)(Object(xe.a)({},e),{},{contaminant:a.value});case Q:return Object(xe.a)(Object(xe.a)({},e),{},{estacio:a.value});default:return e}}}),_e=Object(me.createStore)(Le,Object(pe.composeWithDevTools)(Object(me.applyMiddleware)((function(e){return function(a){return function(){var t=Object(re.a)(ne.a.mark((function t(n){var r,c,l,o;return ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a(n),t.t0=n.type,t.next=t.t0===Q||t.t0===Z?4:t.t0===Ge?6:12;break;case 4:return e.dispatch(Ve()),t.abrupt("break",12);case 6:return r=K(e.getState()),c=r.estacio,l=r.contaminant,t.next=9,Me(c,l);case 9:return o=t.sent,e.dispatch({type:Be,value:o}),t.abrupt("break",12);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}))));_e.dispatch(Ve()),l.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(o.a,{children:Object(d.jsx)(x.a,{store:_e,children:Object(d.jsx)(fe,{})})})}),document.getElementById("root")),Oe()}},[[66,1,2]]]);
//# sourceMappingURL=main.dde7f0ac.chunk.js.map